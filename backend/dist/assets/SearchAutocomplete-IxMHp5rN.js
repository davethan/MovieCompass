import{r as c,v as B,w as L,q as x,y as D,a as u,m as d,b as n,e as E,z as F,A,f as k,B as y,F as M,h as V,t as b}from"./index-BNQkHBYJ.js";const _={class:"position-relative"},q=["onClick"],z={class:"list-header"},U={__name:"SearchAutocomplete",props:{dataset:{type:Array,required:!0},showInside:{type:Boolean,default:!0},cssClass:{type:String,default:"search-container"},resetSearch:{type:Boolean,default:!1}},emits:["film-selected","search-results-updated","reset-value-changed"],setup(o,{emit:C}){const a=o,r=C,i=c(""),h=c(!1),s=c([]),p=c(null),v=e=>e.replace(/ /g,"").toLowerCase().replace(/ά/g,"α").replace(/έ/g,"ε").replace(/ή/g,"η").replace(/ί/g,"ι").replace(/ό/g,"ο").replace(/ύ/g,"υ").replace(/ώ/g,"ω").replace(/ϊ|ΐ/g,"ι").replace(/ϋ|ΰ/g,"υ"),I=()=>{const e=v(i.value);if(e.length<2){s.value=[],a.showInside||r("search-results-updated",s.value);return}s.value=a.dataset.filter(l=>{const t=v(l.greekTitle),w=v(l.originalTitle);return t.includes(e)||w.includes(e)}),a.showInside||(s.value.length?r("search-results-updated",s.value):r("search-results-updated",!1))},g=B.debounce(I,500),S=()=>{h.value=!0},f=e=>{p.value&&!p.value.contains(e.target)&&(h.value=!1)},m=()=>{i.value="",s.value=[],a.showInside||r("search-results-updated",s.value)},T=e=>{r("film-selected",e)};return L(()=>a.resetSearch,e=>{e&&(m(),r("reset-value-changed"))}),x(()=>{a.showInside&&document.addEventListener("click",f)}),D(()=>{a.showInside&&document.removeEventListener("click",f)}),(e,l)=>(d(),u("div",{class:y(o.cssClass),ref_key:"container",ref:p},[n("div",_,[F(n("input",{class:"search-input","onUpdate:modelValue":l[0]||(l[0]=t=>i.value=t),onKeyup:l[1]||(l[1]=(...t)=>k(g)&&k(g)(...t)),onFocus:S,placeholder:"Ταινία στα σινεμά..."},null,544),[[A,i.value]]),n("button",{type:"button",class:"btn-close btn-reset-search","aria-label":"Close",onClick:m})]),o.showInside&&h.value&&s.value.length?(d(),u("ul",{key:0,class:y(o.showInside?"list-group-inside":"list-group")},[(d(!0),u(M,null,V(s.value,t=>(d(),u("li",{key:t.id,class:"list-group-item cursor-pointer border-bottom p-2 list-header","aria-current":"true",onClick:w=>T(t.id)},[n("h5",z,b(t.greekTitle),1),n("div",null,b(t.originalTitle),1)],8,q))),128))],2)):E("",!0)],2))}};export{U as default};
