import{r as c,y as B,w as I,z as _,A as L,i,a as u,b as n,B as x,C as D,d as w,F as E,f as F,t as y,e as A,v as M}from"./index-B82bQ2K-.js";const V={class:"position-relative"},z={key:0,class:"list-group"},N=["onClick"],U={class:"list-header"},K={__name:"SearchAutocomplete",props:{dataset:{type:Array,required:!0},showInside:{type:Boolean,default:!0},cssClass:{type:String,default:"search-container"},resetSearch:{type:Boolean,default:!1}},emits:["film-selected","search-results-updated","reset-value-changed"],setup(d,{emit:C}){const a=d,r=C,o=c(""),h=c(!1),s=c([]),p=c(null),v=e=>e.replace(/ /g,"").toLowerCase().replace(/ά/g,"α").replace(/έ/g,"ε").replace(/ή/g,"η").replace(/ί/g,"ι").replace(/ό/g,"ο").replace(/ύ/g,"υ").replace(/ώ/g,"ω").replace(/ϊ|ΐ/g,"ι").replace(/ϋ|ΰ/g,"υ"),b=()=>{const e=v(o.value);if(e.length<2){s.value=[],a.showInside||r("search-results-updated",s.value);return}s.value=a.dataset.filter(l=>{const t=v(l.greekTitle),k=v(l.originalTitle);return t.includes(e)||k.includes(e)}),a.showInside||(s.value.length?r("search-results-updated",s.value):r("search-results-updated",!1))},g=B.debounce(b,500),S=()=>{h.value=!0},f=e=>{p.value&&!p.value.contains(e.target)&&(h.value=!1)},m=()=>{o.value="",s.value=[],a.showInside||r("search-results-updated",s.value)},T=e=>{r("film-selected",e)};return I(()=>a.resetSearch,e=>{e&&(m(),r("reset-value-changed"))}),_(()=>{a.showInside&&document.addEventListener("click",f)}),L(()=>{a.showInside&&document.removeEventListener("click",f)}),(e,l)=>(i(),u("div",{class:M(d.cssClass),ref_key:"container",ref:p},[n("div",V,[x(n("input",{class:"search-input","onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),onKeyup:l[1]||(l[1]=(...t)=>w(g)&&w(g)(...t)),onFocus:S,placeholder:"Αναζήτηση ταινίας..."},null,544),[[D,o.value]]),n("button",{type:"button",class:"btn-close btn-reset-search","aria-label":"Close",onClick:m})]),d.showInside&&h.value&&s.value.length?(i(),u("ul",z,[(i(!0),u(E,null,F(s.value,t=>(i(),u("li",{key:t.id,class:"list-group-item cursor-pointer","aria-current":"true",onClick:k=>T(t.id)},[n("h5",U,y(t.greekTitle),1),n("div",null,y(t.originalTitle),1)],8,N))),128))])):A("",!0)],2))}};export{K as default};
