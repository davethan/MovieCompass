import{A as D,r as c,y as E,w as L,v as x,B as F,a as u,m as d,b as n,e as A,C as M,D as V,f as g,E as f,F as _,h as N,t as b}from"./index-BJDinQ2D.js";const U={class:"position-relative"},j=["onClick"],q={class:"list-header"},K={__name:"SearchAutocomplete",props:{dataset:{type:Array,required:!0},showInside:{type:Boolean,default:!0},cssClass:{type:String,default:"search-container"},resetSearch:{type:Boolean,default:!1}},emits:["film-selected","search-results-updated","reset-value-changed"],setup(o,{emit:C}){const a=o,r=C,I=D("theme"),i=c(""),h=c(!1),s=c([]),p=c(null),v=e=>e.replace(/ /g,"").toLowerCase().replace(/ά/g,"α").replace(/έ/g,"ε").replace(/ή/g,"η").replace(/ί/g,"ι").replace(/ό/g,"ο").replace(/ύ/g,"υ").replace(/ώ/g,"ω").replace(/ϊ|ΐ/g,"ι").replace(/ϋ|ΰ/g,"υ"),S=()=>{const e=v(i.value);if(e.length<2){s.value=[],a.showInside||r("search-results-updated",s.value);return}s.value=a.dataset.filter(l=>{const t=v(l.greekTitle),y=v(l.originalTitle);return t.includes(e)||y.includes(e)}),a.showInside||(s.value.length?r("search-results-updated",s.value):r("search-results-updated",!1))},m=E.debounce(S,500),T=()=>{h.value=!0},w=e=>{p.value&&!p.value.contains(e.target)&&(h.value=!1)},k=()=>{i.value="",s.value=[],a.showInside||r("search-results-updated",s.value)},B=e=>{r("film-selected",e)};return L(()=>a.resetSearch,e=>{e&&(k(),r("reset-value-changed"))}),x(()=>{a.showInside&&document.addEventListener("click",w)}),F(()=>{a.showInside&&document.removeEventListener("click",w)}),(e,l)=>(d(),u("div",{class:f(o.cssClass),ref_key:"container",ref:p},[n("div",U,[M(n("input",{class:"search-input","onUpdate:modelValue":l[0]||(l[0]=t=>i.value=t),onKeyup:l[1]||(l[1]=(...t)=>g(m)&&g(m)(...t)),onFocus:T,placeholder:"Ταινία στα σινεμά..."},null,544),[[V,i.value]]),n("button",{type:"button",class:f(["btn-close","btn-reset-search",{"btn-close-white":g(I)==="dark"}]),"aria-label":"Close",onClick:k},null,2)]),o.showInside&&h.value&&s.value.length?(d(),u("ul",{key:0,class:f(o.showInside?"list-group-inside":"list-group")},[(d(!0),u(_,null,N(s.value,t=>(d(),u("li",{key:t.id,class:"list-group-item cursor-pointer border-bottom p-2 list-header","aria-current":"true",onClick:y=>B(t.id)},[n("h5",q,b(t.greekTitle),1),n("div",null,b(t.originalTitle),1)],8,j))),128))],2)):A("",!0)],2))}};export{K as default};
